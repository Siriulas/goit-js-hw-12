{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '44807177-c49104cccf7249c598a5adf77';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        page: page,\n        per_page: perPage,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Fetch error: ', error);\n    throw error;\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet lightbox;\n\nexport function renderImages(images) {\n  const gallery = document.querySelector('.gallery');\n  const imagesHTML = images.map(image => createImageCard(image)).join('');\n  gallery.insertAdjacentHTML('beforeend', imagesHTML);\n\n  if (lightbox) {\n    lightbox.refresh();\n  } else {\n    lightbox = new SimpleLightbox('.gallery a');\n  }\n\n  smoothScroll();\n}\n\nfunction createImageCard(image) {\n  return `\n    <div class=\"image-card\">\n      <a href=\"${image.largeImageURL}\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n      </a>\n      <div class=\"info\">\n        <div> <p>Likes: <p>${image.likes}</p></p></div>\n        <div><p>Views: <p>${image.views}</p></p></div>\n        <div><p>Comments: <p>${image.comments}</p></p></div>\n        <div> <p>Downloads: <p>${image.downloads}</p></p></div>\n      </div>\n    </div>\n  `;\n}\n\nfunction smoothScroll() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nexport function clearGallery() {\n  const gallery = document.querySelector('.gallery');\n  gallery.innerHTML = '';\n}\n\nexport function showMessage(message) {\n  iziToast.error({\n    message: message,\n    messageColor: '#fff',\n    position: 'topRight',\n    color: '#ef4040',\n  });\n}\n\nexport function showLoading() {\n  const loader = document.createElement('div');\n  loader.classList.add('loader');\n  document.body.appendChild(loader);\n}\n\nexport function hideLoading() {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.remove();\n  }\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport {\n  renderImages,\n  showMessage,\n  showLoading,\n  hideLoading,\n  clearGallery,\n} from './js/render-functions.js';\n\nlet currentPage = 1;\nlet currentQuery = '';\nconst form = document.querySelector('#search-form');\nconst input = document.querySelector('#search-input');\nconst loadMoreBtn = document.createElement('button');\nloadMoreBtn.classList.add('btn', 'load-more');\nloadMoreBtn.textContent = 'Load more';\nloadMoreBtn.style.display = 'none';\ndocument.body.appendChild(loadMoreBtn);\n\nform.addEventListener('submit', event => {\n  event.preventDefault();\n  handleSearch();\n});\n\nloadMoreBtn.addEventListener('click', () => {\n  currentPage += 1;\n  loadImages(currentQuery, currentPage);\n});\n\nasync function handleSearch() {\n  currentQuery = input.value.trim();\n  if (!currentQuery) {\n    showMessage('Please enter a search term');\n    return;\n  }\n\n  currentPage = 1;\n  clearGallery();\n  loadMoreBtn.style.display = 'none';\n  await loadImages(currentQuery, currentPage);\n}\n\nasync function loadImages(query, page) {\n  showLoading();\n  try {\n    const data = await fetchImages(query, page);\n    hideLoading();\n    if (data.hits.length === 0) {\n      showMessage(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n    } else {\n      renderImages(data.hits);\n      if (data.totalHits > page * 15) {\n        loadMoreBtn.style.display = 'block';\n      } else {\n        loadMoreBtn.style.display = 'none';\n        showMessage(\n          \"We're sorry, but you've reached the end of search results.\"\n        );\n      }\n    }\n  } catch (error) {\n    hideLoading();\n    clearGallery();\n    showMessage('Failed to fetch images. Please try again later.');\n    console.error('Fetch error: ', error);\n  }\n}\n"],"names":["BASE_URL","API_KEY","fetchImages","query","page","perPage","axios","error","lightbox","renderImages","images","gallery","imagesHTML","image","createImageCard","SimpleLightbox","smoothScroll","cardHeight","clearGallery","showMessage","message","iziToast","showLoading","loader","hideLoading","currentPage","currentQuery","form","input","loadMoreBtn","event","handleSearch","loadImages","data"],"mappings":"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"}